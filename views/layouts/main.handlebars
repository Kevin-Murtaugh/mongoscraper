<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Kukla's Korner /Red Wings search & scrape</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
    crossorigin="anonymous">
</head>

<body>

  <div class="container">

    <!-- Jumbotron  -->
    <div class="jumbotron">
      <h1>World Rugby News</h1>
    </div>

    <div class="row">

      <!-- Search Parameters Panel  -->
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Search Parameters</h3>
          </div>
          <div class="panel-body">
            <form role="form">

              <div class="form-group">
                <label for="search">Search Term:</label>
                <input type="text" class="form-control" id="search">
              </div>

              <button type="submit" class="btn btn-default" id="search-btn">Search</button>
              <button type="button" class="btn btn-default">Clear</button>

            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Results Panel -->
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Search Results</h3>
          </div>
          <div class="panel-body" id="well-section">
            {{{body}}}
            <ul id="search-results">

            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- jQuery JS -->
  <script src="https://code.jquery.com/jquery.js"></script>

  <!-- Logic.js -->
  <script>
    $('#search-btn').click(function (e) {
      e.preventDefault()
      var searchTerm = $('#search').val()
      searchTerm = searchTerm.split(' ').join('+')

      fetch(`/search?term=${searchTerm}`)
        .then(res => res.json())
        .then((res) => {
          console.log(res)
          res.results.forEach(article => {
            $('#search-results').append(`
              <li>${article.articleTitle}</li>
              <li>${article.articleURL}</li>
              <li>${article.articleSummary}</li>
            `)
          })
        })
    })
  </script>



</body>

</html>